---
import Tags from '@components/ui/Tags.astro';
import Layout from '@layouts/Layout.astro';
import { getCollection } from 'astro:content';
export async function getStaticPaths() {
	const projects = await getCollection('projects');
	return projects.map((project) => ({
		params: { title: project.data.title.toLowerCase().replace(/\s+/g, '-') },
	}));
}
const { title } = Astro.params;
const projects = await getCollection('projects');
const project = projects.find((p) => p.data.title.toLowerCase().replace(/\s+/g, '-') === title);

if (!project) {
	throw new Error(`Project with title ${title} not found`);
}
---

<Layout title={project.data.title}>
	<main class="container mx-auto p-4">
		<h1 class="mb-4 text-4xl font-bold">{project.data.title}</h1>
		<div class="mb-4 flex items-start">
			<img
				src={project.data.image}
				height="200"
				width="200"
				alt={project.data.img_alt}
				class="mb-2 mr-2 inline-block"
			/>
			<p class="whitespace-pre-line">{project.data.description}</p>
		</div>
		<Tags tags={project.data.tags} />
		<a href={project.data.link} target="_blank" class="text-blue-500 hover:underline"
			>Visit Website</a
		>
	</main>
</Layout>
